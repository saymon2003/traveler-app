@page "/travelers"
@using TravelApp.Data
@inject TravelContext Db

<h3>Travelers</h3>

<table class="table table-bordered">
  <thead class="table-light">
    <tr>
      <th>ID</th>
      <th>First Name</th>
      <th>Last Name</th>
      <th>Style</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
    @foreach (var t in travelers)
    {
      <tr>
        <td>@t.Id</td>
        <td>@t.FirstName</td>
        <td>@t.LastName</td>
        <td>@t.Style</td>
        <td>
          <!-- IMPORTANT: Razor attribute needs @(...) for interpolation -->
          <NavLink class="btn btn-primary" href="@($"/plan-trip/{t.Id}")">
            Plan Trip
          </NavLink>
        </td>
      </tr>
    }
  </tbody>
</table>

<div class="mt-3">
  <NavLink class="btn btn-success" href="/add-traveler">Add Traveler</NavLink>
</div>

@code {
  private List<Traveler> travelers = new();

  protected override async Task OnInitializedAsync()
  {
    travelers = await Db.Travelers.OrderBy(t => t.Id).ToListAsync();
  }
}
